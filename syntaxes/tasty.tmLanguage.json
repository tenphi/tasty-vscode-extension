{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Tasty",
  "scopeName": "source.tasty",
  "injectionSelector": "L:source.tsx -comment, L:source.ts -comment, L:source.js -comment, L:source.jsx -comment",
  "patterns": [
    {
      "include": "#tasty-styles"
    }
  ],
  "repository": {
    "tasty-styles": {
      "patterns": [
        {
          "name": "meta.tasty-styles.inline.tsx",
          "begin": "\\{\\{",
          "end": "\\}\\}",
          "contentName": "meta.embedded.block.tasty",
          "patterns": [
            { "include": "#comments" },
            { "include": "#template-strings" },
            { "include": "#tasty-object-property" },
            { "include": "#tasty-nested-object" }
          ]
        },
        {
          "name": "meta.tasty-styles.variable.tsx",
          "comment": "Match variables ending with Styles/Tokens, with optional Styles/Tokens type annotation",
          "begin": "(?:\\b(?:export)\\s+)?\\b(const|let|var)\\s+(\\w*(?:[Ss][Tt][Yy][Ll][Ee][Ss]|[Tt][Oo][Kk][Ee][Nn][Ss]))(?:\\s*:\\s*[\\w.]*?(?:Styles|Tokens)(?:\\s*<[^>]+>)?(?:\\s*\\[\\])?)?\\s*=\\s*\\{",
          "end": "\\}",
          "contentName": "meta.embedded.block.tasty",
          "beginCaptures": {
            "1": {
              "name": "storage.type.tsx"
            },
            "2": {
              "name": "entity.name.tag.tsx"
            }
          },
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#template-strings"
            },
            {
              "include": "#tasty-object-property"
            },
            {
              "include": "#tasty-nested-object"
            },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        },
        {
          "name": "meta.tasty-styles.typed.tsx",
          "comment": "Match variables with explicit Styles type annotation (e.g., const foo: Styles = { ... })",
          "begin": "(?:\\b(?:export)\\s+)?\\b(const|let|var)\\s+(\\w+)\\s*:\\s*(Styles)\\s*=\\s*\\{",
          "end": "\\}",
          "contentName": "meta.embedded.block.tasty",
          "beginCaptures": {
            "1": {
              "name": "storage.type.tsx"
            },
            "2": {
              "name": "variable.other.constant.tsx"
            },
            "3": {
              "name": "entity.name.type.tsx"
            }
          },
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#template-strings"
            },
            {
              "include": "#tasty-object-property"
            },
            {
              "include": "#tasty-nested-object"
            },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        },
        {
          "name": "meta.tasty-styles.tsx",
          "comment": "Only match object properties (styles: { ... }) here. JSX attributes with styles={...} are handled by the inline {{ ... }} rule above. This avoids breaking when styles are set via a predefined object, e.g. styles={styles}.",
          "begin": "\\b(styles|\\w*[Ss]tyles)\\s*:\\s*\\{",
          "end": "\\}",
          "contentName": "meta.embedded.block.tasty",
          "beginCaptures": {
            "1": {
              "name": "entity.name.tag.tsx"
            }
          },
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#template-strings"
            },
            {
              "include": "#tasty-object-property"
            },
            {
              "include": "#tasty-nested-object"
            },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        },
        {
          "name": "meta.tasty-variants.tsx",
          "begin": "\\b(variants)\\s*[:=]\\s*\\{",
          "end": "\\}",
          "contentName": "meta.embedded.block.tasty",
          "beginCaptures": {
            "1": {
              "name": "entity.name.tag.tsx"
            }
          },
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#template-strings"
            },
            {
              "include": "#tasty-object-property"
            },
            {
              "include": "#tasty-nested-object"
            },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        },
        {
          "name": "meta.tasty-jsx-component.tsx",
          "comment": "JSX component opening tags (capitalized) - use lookahead to not capture the tag name",
          "begin": "(<)(?=[A-Z][A-Za-z0-9_.]*)",
          "end": "/?>",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.tag.begin.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.tag.end.tsx"
            }
          },
          "patterns": [
            {
              "comment": "Component name - let default grammar handle styling",
              "match": "\\G([A-Z][A-Za-z0-9_.]*)(?:\\s*\\.\\s*([A-Z][A-Za-z0-9_]*))*",
              "captures": {
                "0": {
                  "name": "entity.name.type.tsx"
                }
              }
            },
            { "include": "#jsx-component-style-props" }
          ]
        },
        {
          "name": "meta.tasty-jsx-component-close.tsx",
          "comment": "JSX component closing tags (capitalized) - ensure consistent styling with opening tags",
          "match": "(</)([A-Z][A-Za-z0-9_.]*)(>)",
          "captures": {
            "1": {
              "name": "punctuation.definition.tag.begin.tsx"
            },
            "2": {
              "name": "entity.name.type.tsx"
            },
            "3": {
              "name": "punctuation.definition.tag.end.tsx"
            }
          }
        }
      ]
    },
    "jsx-component-style-props": {
      "comment": "Patterns for style props and regular props inside JSX component tags",
      "patterns": [
        {
          "comment": "Style prop with string value: gap=\"2x\"",
          "name": "meta.jsx-style-prop.string.tasty",
          "begin": "\\b(display|font|preset|hide|whiteSpace|opacity|transition|gridArea|order|gridColumn|gridRow|placeSelf|alignSelf|justifySelf|zIndex|margin|inset|position|reset|padding|paddingInline|paddingBlock|overflow|scrollbar|textAlign|border|radius|shadow|outline|color|fill|fade|image|textTransform|fontWeight|fontStyle|width|height|flexBasis|flexGrow|flexShrink|flex|flow|placeItems|placeContent|alignItems|alignContent|justifyItems|justifyContent|align|justify|gap|columnGap|rowGap|gridColumns|gridRows|gridTemplate|gridAreas)\\s*(=)\\s*(['\"])",
          "end": "\\3",
          "beginCaptures": {
            "1": {
              "name": "support.type.property-name.tasty"
            },
            "2": {
              "name": "keyword.operator.assignment.tsx"
            },
            "3": {
              "name": "punctuation.definition.string.begin.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "contentName": "meta.embedded.block.tasty",
          "patterns": [
            { "include": "#tasty-syntax" }
          ]
        },
        {
          "comment": "Style prop with object value: gap={{ '': '2x', hovered: '3x' }}",
          "name": "meta.jsx-style-prop.object.tasty",
          "begin": "\\b(display|font|preset|hide|whiteSpace|opacity|transition|gridArea|order|gridColumn|gridRow|placeSelf|alignSelf|justifySelf|zIndex|margin|inset|position|reset|padding|paddingInline|paddingBlock|overflow|scrollbar|textAlign|border|radius|shadow|outline|color|fill|fade|image|textTransform|fontWeight|fontStyle|width|height|flexBasis|flexGrow|flexShrink|flex|flow|placeItems|placeContent|alignItems|alignContent|justifyItems|justifyContent|align|justify|gap|columnGap|rowGap|gridColumns|gridRows|gridTemplate|gridAreas)\\s*(=)\\s*(\\{)\\s*(\\{)",
          "end": "\\}\\s*\\}",
          "beginCaptures": {
            "1": {
              "name": "support.type.property-name.tasty"
            },
            "2": {
              "name": "keyword.operator.assignment.tsx"
            },
            "3": {
              "name": "punctuation.section.embedded.begin.tsx"
            },
            "4": {
              "name": "punctuation.definition.block.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.block.tsx"
            }
          },
          "contentName": "meta.embedded.block.tasty",
          "patterns": [
            { "include": "#comments" },
            { "include": "#tasty-object-property" },
            { "include": "#tasty-nested-object" },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            }
          ]
        },
        {
          "comment": "styles/Styles prop with inline object: styles={{...}}, overlayStyles={{...}}",
          "name": "meta.jsx-style-prop.styles-object.tasty",
          "begin": "\\b(styles|\\w*[Ss]tyles)\\s*(=)\\s*(\\{)\\s*(\\{)",
          "end": "\\}\\s*\\}",
          "beginCaptures": {
            "1": {
              "name": "support.type.property-name.tasty"
            },
            "2": {
              "name": "keyword.operator.assignment.tsx"
            },
            "3": {
              "name": "punctuation.section.embedded.begin.tsx"
            },
            "4": {
              "name": "punctuation.definition.block.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.block.tsx"
            }
          },
          "contentName": "meta.embedded.block.tasty",
          "patterns": [
            { "include": "#comments" },
            { "include": "#tasty-object-property" },
            { "include": "#tasty-nested-object" },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        },
        {
          "comment": "Boolean attribute (no value): autoHideActions, disabled",
          "match": "\\b([a-zA-Z_][a-zA-Z0-9_-]*)(?=\\s|/?>)",
          "captures": {
            "1": {
              "name": "entity.other.attribute-name.tsx"
            }
          }
        },
        {
          "comment": "Regular attribute with expression value: onClick={...}",
          "begin": "\\b([a-zA-Z_][a-zA-Z0-9_-]*)\\s*(=)\\s*(\\{)",
          "end": "\\}",
          "beginCaptures": {
            "1": {
              "name": "entity.other.attribute-name.tsx"
            },
            "2": {
              "name": "keyword.operator.assignment.tsx"
            },
            "3": {
              "name": "punctuation.section.embedded.begin.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.embedded.end.tsx"
            }
          },
          "patterns": [
            { "include": "#jsx-expression-content" }
          ]
        },
        {
          "comment": "Regular attribute with string value: className=\"wrapper\"",
          "match": "\\b([a-zA-Z_][a-zA-Z0-9_-]*)\\s*(=)\\s*(['\"])([^'\"]*)(\\3)",
          "captures": {
            "1": {
              "name": "entity.other.attribute-name.tsx"
            },
            "2": {
              "name": "keyword.operator.assignment.tsx"
            },
            "3": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "4": {
              "name": "string.quoted.tsx"
            },
            "5": {
              "name": "punctuation.definition.string.end.tsx"
            }
          }
        },
        {
          "comment": "Spread attributes: {...props}",
          "begin": "(\\{)\\s*(\\.\\.\\.)",
          "end": "\\}",
          "beginCaptures": {
            "1": {
              "name": "punctuation.section.embedded.begin.tsx"
            },
            "2": {
              "name": "keyword.operator.spread.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.embedded.end.tsx"
            }
          },
          "patterns": [
            { "include": "#jsx-expression-content" }
          ]
        }
      ]
    },
    "jsx-expression-content": {
      "comment": "Basic patterns for JSX expression content",
      "patterns": [
        {
          "comment": "Nested braces",
          "begin": "\\{",
          "end": "\\}",
          "patterns": [
            { "include": "#jsx-expression-content" }
          ]
        },
        {
          "comment": "Arrow function",
          "match": "=>"
        },
        {
          "comment": "Strings",
          "begin": "(['\"])",
          "end": "\\1",
          "patterns": [
            { "match": "\\\\." }
          ]
        },
        {
          "comment": "Parentheses",
          "begin": "\\(",
          "end": "\\)",
          "patterns": [
            { "include": "#jsx-expression-content" }
          ]
        },
        {
          "comment": "Brackets",
          "begin": "\\[",
          "end": "\\]",
          "patterns": [
            { "include": "#jsx-expression-content" }
          ]
        },
        {
          "comment": "Fallback to TSX expression grammar",
          "include": "source.tsx#expression"
        }
      ]
    },
    "tasty-object-property": {
      "patterns": [
        {
          "comment": "Keyframe step keys: '0%', '50%', '0%, 100%', 'from', 'to'",
          "name": "meta.object-property.keyframe-step.tasty",
          "match": "(['\"`])((?:\\d+%(?:\\s*,\\s*\\d+%)*)|from|to)(\\1)\\s*(:)",
          "captures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "constant.numeric.keyframe-step.tasty"
            },
            "3": {
              "name": "punctuation.definition.string.end.tsx"
            },
            "4": {
              "name": "punctuation.separator.key-value.tsx"
            }
          }
        },
        {
          "comment": "Quoted selector affix key: '$':",
          "name": "meta.object-property.selector-affix.tasty",
          "begin": "(['\"`])(\\$)(\\1)\\s*(:)",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "keyword.operator.selector-affix.tasty"
            },
            "3": {
              "name": "punctuation.definition.string.end.tsx"
            },
            "4": {
              "name": "punctuation.separator.key-value.tsx"
            }
          },
          "patterns": [
            {
              "include": "#tasty-selector-affix-value"
            }
          ]
        },
        {
          "comment": "Selector affix key: $:",
          "name": "meta.object-property.selector-affix.tasty",
          "begin": "(\\$)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "keyword.operator.selector-affix.tasty"
            }
          },
          "patterns": [
            {
              "include": "#tasty-selector-affix-value"
            }
          ]
        },
        {
          "comment": "Quoted custom property definition keys: '$property':",
          "name": "meta.object-property.custom-property-quoted.tasty",
          "match": "(['\"`])(\\$[a-zA-Z_][a-zA-Z0-9_-]*)(\\1)\\s*(:)",
          "captures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "variable.other.constant.tasty"
            },
            "3": {
              "name": "punctuation.definition.string.end.tsx"
            },
            "4": {
              "name": "punctuation.separator.key-value.tsx"
            }
          }
        },
        {
          "comment": "Simplified attribute selector keys with double-quoted values: 'theme=\"danger\"':",
          "name": "meta.object-property.attribute-selector.tasty",
          "begin": "(['\"`])([a-zA-Z_][a-zA-Z0-9_-]*)(=)(\")([^\"]*)(\")(\\1)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "entity.other.attribute-name.tasty"
            },
            "3": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "4": {
              "name": "punctuation.definition.string.begin.tasty"
            },
            "5": {
              "name": "string.quoted.attribute-value.tasty"
            },
            "6": {
              "name": "punctuation.definition.string.end.tasty"
            },
            "7": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Simplified attribute selector keys with single-quoted values: 'theme='danger'':",
          "name": "meta.object-property.attribute-selector.tasty",
          "begin": "(['\"`])([a-zA-Z_][a-zA-Z0-9_-]*)(=)(')([^']*)(')(\\1)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "entity.other.attribute-name.tasty"
            },
            "3": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "4": {
              "name": "punctuation.definition.string.begin.tasty"
            },
            "5": {
              "name": "string.quoted.attribute-value.tasty"
            },
            "6": {
              "name": "punctuation.definition.string.end.tasty"
            },
            "7": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Simplified attribute selector keys with unquoted values: 'theme=danger':",
          "name": "meta.object-property.attribute-selector.tasty",
          "begin": "(['\"`])([a-zA-Z_][a-zA-Z0-9_-]*)(=)([a-zA-Z0-9_-]+)(\\1)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "entity.other.attribute-name.tasty"
            },
            "3": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "4": {
              "name": "string.unquoted.attribute-value.tasty"
            },
            "5": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Pure attribute selector keys: '[data-theme=\"dark\"]'",
          "name": "meta.object-property.attribute-selector.tasty",
          "begin": "(['\"`])(\\[)([a-zA-Z_][a-zA-Z0-9_-]*)(\\*?[~|^$]?=)(\"[^\"]*\"|'[^']*')(\\])(\\1)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "punctuation.definition.attribute-selector.begin.tasty"
            },
            "3": {
              "name": "entity.other.attribute-name.tasty"
            },
            "4": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "5": {
              "name": "string.quoted.attribute-value.tasty"
            },
            "6": {
              "name": "punctuation.definition.attribute-selector.end.tasty"
            },
            "7": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Pure simple attribute selector keys: '[disabled]'",
          "name": "meta.object-property.simple-attribute.tasty",
          "begin": "(['\"`])(\\[)([a-zA-Z_][a-zA-Z0-9_-]*)(\\])(\\1)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "punctuation.definition.attribute-selector.begin.tasty"
            },
            "3": {
              "name": "entity.other.attribute-name.tasty"
            },
            "4": {
              "name": "punctuation.definition.attribute-selector.end.tasty"
            },
            "5": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Complex state expression keys with attribute selectors",
          "name": "meta.object-property.tasty",
          "begin": "(['\"`])",
          "end": "\\1\\s*:",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "contentName": "meta.embedded.block.tasty string.quoted.key.tasty",
          "patterns": [
            {
              "include": "#custom-properties"
            },
            {
              "include": "#state-logic-groups"
            },
            {
              "include": "#state-selectors"
            },
            {
              "include": "#state-logic-operators"
            }
          ]
        },
        {
          "comment": "Property value continuation for quoted custom properties",
          "name": "meta.object-property.value.custom-property.tasty",
          "begin": "(?<=['\"`]\\$[a-zA-Z_][a-zA-Z0-9_-]*['\"`]\\s*:)",
          "end": "(?=,|\\})",
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Property value continuation",
          "name": "meta.object-property.value.tasty",
          "begin": "(?<=:)",
          "end": "(?=,|\\})",
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Custom property definition",
          "name": "meta.object-property.custom-property.tasty",
          "begin": "(\\$[a-zA-Z_][a-zA-Z0-9_-]*)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "variable.other.constant.tasty"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        },
        {
          "comment": "Quoted @keyframes property key",
          "name": "meta.object-property.at-rule.tasty",
          "match": "(['\"`])(@keyframes|@properties)(\\1)\\s*(:)",
          "captures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "keyword.control.at-rule.tasty"
            },
            "3": {
              "name": "punctuation.definition.string.end.tsx"
            },
            "4": {
              "name": "punctuation.separator.key-value.tsx"
            }
          }
        },
        {
          "comment": "Quoted color token definition key: '#primary':",
          "name": "meta.object-property.color-token.tasty",
          "match": "(['\"`])(#[a-zA-Z][a-zA-Z0-9_-]*)(\\1)\\s*(:)",
          "captures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            },
            "2": {
              "name": "support.constant.color.tasty-token"
            },
            "3": {
              "name": "punctuation.definition.string.end.tsx"
            },
            "4": {
              "name": "punctuation.separator.key-value.tsx"
            }
          }
        },
        {
          "name": "meta.object-property.unquoted.tasty",
          "begin": "([a-zA-Z_][a-zA-Z0-9_$-]*)\\s*:",
          "end": "(?=,|\\})",
          "beginCaptures": {
            "1": {
              "name": "support.type.property-name.tasty"
            }
          },
          "patterns": [
            {
              "include": "#tasty-property-value"
            }
          ]
        }
      ]
    },
    "tasty-property-value": {
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#tasty-nested-object"
        },
        {
          "include": "#tasty-array-value"
        },
        {
          "include": "#tasty-string-value"
        },
        {
          "include": "#tasty-non-string-value"
        },
        {
          "match": "\\s+",
          "name": "source.tsx"
        }
      ]
    },
    "tasty-nested-object": {
      "patterns": [
        {
          "name": "meta.tasty-nested-object.tsx",
          "begin": "\\{",
          "end": "\\}",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#template-strings"
            },
            {
              "include": "#tasty-object-property"
            },
            {
              "include": "#tasty-nested-object"
            },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        }
      ]
    },
    "template-strings": {
      "patterns": [
        {
          "name": "string.template.tsx",
          "begin": "`",
          "end": "`",
          "patterns": [
            {
              "name": "constant.character.escape.tsx",
              "match": "\\\\."
            },
            {
              "name": "meta.interpolation.tsx",
              "begin": "\\$\\{",
              "end": "\\}",
              "patterns": [
                {
                  "include": "#tasty-nested-object"
                }
              ]
            }
          ]
        }
      ]
    },
    "tasty-array-value": {
      "patterns": [
        {
          "name": "meta.tasty-array.tsx",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.array.begin.tsx"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.array.end.tsx"
            }
          },
          "patterns": [
            { "include": "#comments" },
            {
              "include": "#tasty-string-value"
            },
            {
              "include": "#tasty-nested-object"
            },
            {
              "match": ",",
              "name": "punctuation.separator.comma.tsx"
            },
            {
              "match": "\\s+",
              "name": "source.tsx"
            }
          ]
        }
      ]
    },
    "tasty-string-value": {
      "patterns": [
        {
          "begin": "(['\"`])",
          "end": "\\1",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            }
          },
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "contentName": "meta.embedded.block.tasty",
          "patterns": [
            {
              "include": "#tasty-syntax"
            }
          ]
        }
      ]
    },
    "tasty-selector-affix-value": {
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#tasty-selector-affix-string"
        },
        {
          "include": "#tasty-non-string-value"
        },
        {
          "match": "\\s+",
          "name": "source.tsx"
        }
      ]
    },
    "tasty-selector-affix-string": {
      "patterns": [
        {
          "begin": "(['\"`])",
          "end": "\\1",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.string.begin.tsx"
            }
          },
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.string.end.tsx"
            }
          },
          "contentName": "meta.embedded.block.selector-affix.tasty",
          "patterns": [
            {
              "include": "#selector-affix-syntax"
            }
          ]
        }
      ]
    },
    "selector-affix-syntax": {
      "patterns": [
        {
          "include": "#selector-affix-combinators"
        },
        {
          "include": "#selector-affix-placeholder"
        },
        {
          "include": "#selector-affix-pseudo"
        },
        {
          "include": "#selector-affix-class"
        },
        {
          "include": "#selector-affix-attribute"
        },
        {
          "include": "#selector-affix-sub-element"
        },
        {
          "include": "#selector-affix-tag"
        }
      ]
    },
    "selector-affix-combinators": {
      "patterns": [
        {
          "name": "keyword.operator.selector.combinator.tasty",
          "match": "(\\>|\\+|~)"
        }
      ]
    },
    "selector-affix-placeholder": {
      "patterns": [
        {
          "name": "variable.language.placeholder.tasty",
          "match": "@"
        }
      ]
    },
    "selector-affix-pseudo": {
      "patterns": [
        {
          "name": "meta.selector.pseudo.tasty",
          "match": "(::?)([a-zA-Z-]+)",
          "captures": {
            "1": {
              "name": "punctuation.definition.pseudo-class.tasty"
            },
            "2": {
              "name": "entity.other.attribute-name.pseudo-class.tasty"
            }
          }
        }
      ]
    },
    "selector-affix-class": {
      "patterns": [
        {
          "name": "meta.selector.class.tasty",
          "match": "(\\.)([a-zA-Z_][a-zA-Z0-9_-]*)",
          "captures": {
            "1": {
              "name": "punctuation.definition.class.tasty"
            },
            "2": {
              "name": "entity.other.attribute-name.class.tasty"
            }
          }
        }
      ]
    },
    "selector-affix-attribute": {
      "patterns": [
        {
          "name": "meta.selector.attribute.tasty",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.attribute-selector.begin.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.attribute-selector.end.tasty"
            }
          },
          "patterns": [
            {
              "name": "entity.other.attribute-name.tasty",
              "match": "[a-zA-Z_][a-zA-Z0-9_-]*"
            },
            {
              "name": "keyword.operator.attribute-selector.tasty",
              "match": "\\*?[~|^$]?="
            },
            {
              "include": "#strings"
            },
            {
              "name": "string.unquoted.attribute-value.tasty",
              "match": "[a-zA-Z0-9_-]+"
            }
          ]
        }
      ]
    },
    "selector-affix-sub-element": {
      "patterns": [
        {
          "name": "entity.name.type.tasty",
          "match": "\\b[A-Z][A-Za-z0-9_]*\\b"
        }
      ]
    },
    "selector-affix-tag": {
      "patterns": [
        {
          "name": "entity.name.tag.tasty",
          "match": "\\b[a-z][a-z0-9-]*\\b"
        }
      ]
    },
    "tasty-non-string-value": {
      "patterns": [
        {
          "comment": "Boolean values",
          "name": "constant.language.boolean.tasty",
          "match": "\\b(true|false)\\b"
        },
        {
          "comment": "Numeric values (integers, decimals, zero)",
          "name": "constant.numeric.bare.tasty",
          "match": "\\b[+-]?(?:\\d*\\.\\d+|\\d+)(?![a-zA-Z%])\\b"
        },
        {
          "comment": "Custom properties starting with $",
          "name": "variable.other.constant.tasty",
          "match": "\\$[a-zA-Z_][a-zA-Z0-9_-]*"
        }
      ]
    },
    "tasty-syntax": {
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#custom-properties"
        },
        {
          "include": "#hash-colors"
        },
        {
          "include": "#color-functions"
        },
        {
          "include": "#auto-calc"
        },
        {
          "include": "#value-keywords"
        },
        {
          "include": "#state-logic-groups"
        },
        {
          "include": "#state-selectors"
        },
        {
          "include": "#state-logic-operators"
        },
        {
          "include": "#functions"
        },
        {
          "include": "#urls"
        },
        {
          "include": "#css-with-units"
        },
        {
          "include": "#custom-units"
        },
        {
          "include": "#bare-numbers"
        },
        {
          "include": "#strings"
        },
        {
          "include": "#operators"
        }
      ]
    },
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.tsx",
          "match": "//.*$",
          "captures": {
            "0": {
              "name": "punctuation.definition.comment.tsx"
            }
          }
        },
        {
          "name": "comment.block.css",
          "begin": "/\\*",
          "end": "\\*/",
          "captures": {
            "0": {
              "name": "punctuation.definition.comment.css"
            }
          }
        }
      ]
    },
    "custom-properties": {
      "patterns": [
        {
          "name": "variable.other.constant.tasty",
          "match": "\\$\\$[a-zA-Z_][a-zA-Z0-9_-]*",
          "comment": "Property name reference $$name → --name (used in transition, will-change)"
        },
        {
          "name": "support.constant.color.tasty-token",
          "match": "##[a-zA-Z_][a-zA-Z0-9_-]*",
          "comment": "Color property name reference ##name → --name-color (used in transition)"
        },
        {
          "name": "meta.function-call.color-fallback.tasty",
          "comment": "Color token with fallback: (#primary, #secondary)",
          "begin": "(\\()(#[a-zA-Z][a-zA-Z0-9_-]*(?:\\.[0-9$][a-zA-Z0-9_-]*)?)(\\s*,\\s*)",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.fallback.begin.tasty"
            },
            "2": {
              "name": "support.constant.color.tasty-token"
            },
            "3": {
              "name": "punctuation.separator.comma.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.fallback.end.tasty"
            }
          },
          "patterns": [
            {
              "include": "#custom-properties"
            },
            {
              "include": "#hash-colors"
            },
            {
              "include": "#tasty-syntax"
            }
          ]
        },
        {
          "name": "meta.function-call.custom-property.tasty",
          "begin": "\\((\\$[a-zA-Z_][a-zA-Z0-9_-]*)(\\s*,\\s*)",
          "end": "\\)",
          "beginCaptures": {
            "0": {
              "name": "variable.other.custom-property.function.tasty"
            },
            "1": {
              "name": "variable.other.constant.tasty"
            },
            "2": {
              "name": "punctuation.separator.comma.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.parameters.end.tasty"
            }
          },
          "patterns": [
            {
              "include": "#tasty-syntax"
            }
          ]
        },
        {
          "name": "variable.other.constant.tasty",
          "match": "\\$[a-zA-Z_][a-zA-Z0-9_-]*",
          "comment": "Custom properties as single tokens: $local-spacing, $theme-color, etc."
        }
      ]
    },
    "hash-colors": {
      "patterns": [
        {
          "name": "support.constant.color.tasty-token",
          "match": "##[a-zA-Z_][a-zA-Z0-9_-]*",
          "comment": "Color property name reference ##name → --name-color (used in transition, will-change)"
        },
        {
          "name": "support.constant.color.tasty-token.builtin",
          "match": "#current(?:\\.[0-9$][a-zA-Z0-9_-]*)?\\b",
          "comment": "Reserved color token #current for currentcolor, with optional opacity"
        },
        {
          "name": "constant.other.color.tasty-token",
          "match": "#([a-zA-Z][a-zA-Z0-9_-]*(?:\\.[0-9$][a-zA-Z0-9_-]*)?)",
          "captures": {
            "0": {
              "name": "support.constant.color.tasty-token"
            }
          },
          "comment": "Tasty color tokens like #primary, #surface, #primary.5, #primary.$opacity"
        },
        {
          "name": "constant.other.color.hex",
          "match": "#([0-9a-fA-F]{3,8})\\b",
          "captures": {
            "0": {
              "name": "constant.other.color.rgb-value"
            }
          },
          "comment": "Standard hex colors"
        }
      ]
    },
    "color-functions": {
      "patterns": [
        {
          "name": "meta.function-call.css",
          "begin": "\\b(rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|device-cmyk|gray|color-mix|color-contrast)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "support.function.misc.css"
            },
            "2": {
              "name": "punctuation.section.function.begin.css"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.function.end.css"
            }
          },
          "patterns": [
            {
              "include": "#tasty-syntax"
            }
          ]
        }
      ]
    },
    "custom-units": {
      "patterns": [
        {
          "name": "constant.numeric.custom-unit.tasty",
          "match": "(?<!\\w)[+-]?(?:\\d*\\.\\d+|\\d+)([a-z][a-z0-9]*)(?!\\w)",
          "comment": "Dynamic custom units: {number}{unitName} where unitName starts with letter (2x, 1.5r, .5x, -.75custom, etc.)"
        }
      ]
    },
    "auto-calc": {
      "patterns": [
        {
          "name": "meta.function-call.auto-calc.tasty",
          "begin": "(?<!\\w|url)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.auto-calc.begin.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.auto-calc.end.tasty"
            }
          },
          "patterns": [
            {
              "include": "#tasty-syntax"
            }
          ]
        }
      ]
    },
    "value-keywords": {
      "patterns": [
        {
          "name": "support.constant.property-value.tasty",
          "match": "\\b(none|auto|max-content|min-content|fit-content|stretch|true|false)\\b"
        },
        {
          "name": "support.constant.property-value.tasty-display",
          "match": "\\b(flex|grid|block|inline|inline-flex|inline-grid|inline-block|contents|flow-root)\\b",
          "comment": "CSS display values"
        },
        {
          "name": "support.constant.property-value.tasty-directional",
          "match": "\\b(top|right|bottom|left|center)\\b"
        },
        {
          "name": "support.constant.property-value.tasty-preset",
          "match": "\\b(h[1-6]|t[1-4]m?|p[1-4]|m[1-3]|c[1-2]|tag)\\b"
        },
        {
          "name": "support.constant.property-value.tasty-shape",
          "match": "\\b(round|ellipse|leaf|backleaf)\\b"
        },
        {
          "name": "support.constant.property-value.tasty-scrollbar",
          "match": "\\b(thin|styled|stable|both-edges|always)\\b",
          "comment": "Scrollbar modifier keywords"
        },
        {
          "comment": "CSS @property syntax types",
          "name": "support.constant.property-value.css-syntax",
          "match": "<(color|angle|length|number|percentage|length-percentage|integer|custom-ident|image|url|time|resolution|transform-function|transform-list)>"
        }
      ]
    },
    "state-selectors": {
      "patterns": [
        {
          "comment": "Advanced @media state with parentheses content",
          "name": "meta.advanced-state.media.tasty",
          "begin": "(@media)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.at-rule.media.tasty"
            },
            "2": {
              "name": "punctuation.section.media-query.begin.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.media-query.end.tasty"
            }
          },
          "patterns": [
            { "include": "#advanced-state-inner" }
          ]
        },
        {
          "comment": "Advanced @root/@own/@supports states with parentheses",
          "name": "meta.advanced-state.tasty",
          "begin": "(@(?:root|own|supports))\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.at-rule.tasty"
            },
            "2": {
              "name": "punctuation.section.advanced-state.begin.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.advanced-state.end.tasty"
            }
          },
          "patterns": [
            { "include": "#advanced-state-inner" }
          ]
        },
        {
          "comment": "Container query shorthand @(...)",
          "name": "meta.advanced-state.container.tasty",
          "begin": "(@)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.at-rule.container.tasty"
            },
            "2": {
              "name": "punctuation.section.container-query.begin.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.container-query.end.tasty"
            }
          },
          "patterns": [
            { "include": "#advanced-state-inner" }
          ]
        },
        {
          "comment": "@starting state (no parentheses)",
          "name": "keyword.control.at-rule.starting.tasty",
          "match": "@starting\\b"
        },
        {
          "comment": "@media:type syntax (e.g., @media:print)",
          "name": "keyword.control.at-rule.media-type.tasty",
          "match": "@media:[a-z][a-z0-9-]*"
        },
        {
          "comment": "State alias like @mobile, @tablet, @dark",
          "name": "keyword.control.state-alias.tasty",
          "match": "@[a-zA-Z][a-zA-Z0-9_-]*"
        },
        {
          "name": "meta.attribute-selector.tasty",
          "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(=)(\")([^\"]*)(\")",
          "captures": {
            "1": {
              "name": "entity.other.attribute-name.tasty"
            },
            "2": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "3": {
              "name": "punctuation.definition.string.begin.tasty"
            },
            "4": {
              "name": "string.quoted.attribute-value.tasty"
            },
            "5": {
              "name": "punctuation.definition.string.end.tasty"
            }
          },
          "comment": "Simplified attribute selector with double-quoted value: theme=\"danger\""
        },
        {
          "name": "meta.attribute-selector.tasty",
          "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(=)(')([^']*)(')",
          "captures": {
            "1": {
              "name": "entity.other.attribute-name.tasty"
            },
            "2": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "3": {
              "name": "punctuation.definition.string.begin.tasty"
            },
            "4": {
              "name": "string.quoted.attribute-value.tasty"
            },
            "5": {
              "name": "punctuation.definition.string.end.tasty"
            }
          },
          "comment": "Simplified attribute selector with single-quoted value: theme='danger'"
        },
        {
          "name": "meta.attribute-selector.tasty",
          "match": "\\b([a-zA-Z_][a-zA-Z0-9_-]*)(=)([a-zA-Z0-9_-]+)\\b",
          "captures": {
            "1": {
              "name": "entity.other.attribute-name.tasty"
            },
            "2": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "3": {
              "name": "string.unquoted.attribute-value.tasty"
            }
          },
          "comment": "Simplified attribute selector with unquoted value: theme=danger"
        },
        {
          "name": "support.constant.property-value.tasty-state",
          "match": "\\b[a-z][a-z0-9-]*\\b",
          "comment": "Custom state identifiers (kebab-case)"
        },
        {
          "comment": "CSS pseudo-classes with function notation: :has(), :is(), :where(), :not(), :nth-child(), etc.",
          "name": "meta.pseudo-class-function.css",
          "begin": "(::?)([a-z][a-z0-9-]*)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.pseudo-class.css"
            },
            "2": {
              "name": "entity.other.attribute-name.pseudo-class.css"
            },
            "3": {
              "name": "punctuation.section.function.begin.css"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.function.end.css"
            }
          },
          "patterns": [
            { "include": "#pseudo-class-function-content" }
          ]
        },
        {
          "comment": "CSS pseudo-classes without function notation: :hover, :focus, etc.",
          "name": "meta.pseudo-class.css",
          "match": "(::?)([a-z][a-z0-9-]*)",
          "captures": {
            "1": {
              "name": "punctuation.definition.pseudo-class.css"
            },
            "2": {
              "name": "entity.other.attribute-name.pseudo-class.css"
            }
          }
        },
        {
          "name": "entity.name.tag.class.css",
          "match": "\\.[a-z][a-z0-9-]+",
          "comment": "CSS class selectors"
        },
        {
          "name": "meta.attribute-selector.tasty",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.attribute-selector.begin.tasty"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.attribute-selector.end.tasty"
            }
          },
          "patterns": [
            {
              "comment": "Attribute with double quoted value: [data-theme=\"dark\"]",
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(\\*?[~|^$]?=)(\")([^\"]*)(\")",
              "captures": {
                "1": {
                  "name": "entity.other.attribute-name.tasty"
                },
                "2": {
                  "name": "keyword.operator.attribute-selector.tasty"
                },
                "3": {
                  "name": "punctuation.definition.string.begin.tasty"
                },
                "4": {
                  "name": "string.quoted.attribute-value.tasty"
                },
                "5": {
                  "name": "punctuation.definition.string.end.tasty"
                }
              }
            },
            {
              "comment": "Attribute with single quoted value: [data-theme='dark']",
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(\\*?[~|^$]?=)(')([^']*)(')",
              "captures": {
                "1": {
                  "name": "entity.other.attribute-name.tasty"
                },
                "2": {
                  "name": "keyword.operator.attribute-selector.tasty"
                },
                "3": {
                  "name": "punctuation.definition.string.begin.tasty"
                },
                "4": {
                  "name": "string.quoted.attribute-value.tasty"
                },
                "5": {
                  "name": "punctuation.definition.string.end.tasty"
                }
              }
            },
            {
              "comment": "Attribute with unquoted value: [data-theme=dark]",
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(\\*?[~|^$]?=)([a-zA-Z0-9_-]+)",
              "captures": {
                "1": {
                  "name": "entity.other.attribute-name.tasty"
                },
                "2": {
                  "name": "keyword.operator.attribute-selector.tasty"
                },
                "3": {
                  "name": "string.unquoted.attribute-value.tasty"
                }
              }
            },
            {
              "comment": "Simple attribute name only: [disabled]",
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)",
              "captures": {
                "1": {
                  "name": "entity.other.attribute-name.tasty"
                }
              }
            }
          ],
          "comment": "Enhanced CSS attribute selectors with proper syntax breakdown"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "name": "meta.function-call.css",
          "begin": "\\b([a-zA-Z_][a-zA-Z0-9_-]*)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "support.function.misc.css"
            },
            "2": {
              "name": "punctuation.section.function.begin.css"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.function.end.css"
            }
          },
          "patterns": [
            {
              "include": "#tasty-syntax"
            }
          ]
        }
      ]
    },
    "urls": {
      "patterns": [
        {
          "name": "meta.function-call.css",
          "begin": "\\b(url)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "support.function.misc.css"
            },
            "2": {
              "name": "punctuation.section.function.begin.css"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.function.end.css"
            }
          },
          "patterns": [
            {
              "include": "#strings"
            },
            {
              "name": "string.unquoted.css",
              "match": "[^\\)\\s]+"
            }
          ]
        }
      ]
    },
    "css-with-units": {
      "patterns": [
        {
          "name": "constant.numeric.css-with-unit",
          "match": "\\b[+-]?(?:\\d*\\.\\d+|\\d+)(em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)\\b|\\b[+-]?(?:\\d*\\.\\d+|\\d+)%",
          "comment": "CSS numbers with explicit units (1.5rem, 100%, 2s, etc.)"
        }
      ]
    },
    "bare-numbers": {
      "patterns": [
        {
          "name": "constant.numeric.css",
          "match": "(?<!\\w)[+-]?(?:\\d*\\.\\d+|\\d+)(?![a-z])",
          "comment": "Bare numbers without units, including .5 format (after custom units are checked)"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.css",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.css",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.single.css",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.css",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.arithmetic.css",
          "match": "[+\\-*/]"
        },
        {
          "name": "punctuation.separator.css",
          "match": "[,;]"
        }
      ]
    },
    "state-logic-operators": {
      "patterns": [
        {
          "name": "keyword.operator.logical.tasty",
          "match": "(&|\\||\\^|!)",
          "comment": "Logical operators: AND, OR, XOR, NOT"
        }
      ]
    },
    "state-logic-groups": {
      "patterns": [
        {
          "name": "meta.group.state-logic.tasty",
          "begin": "\\(",
          "beginCaptures": {
            "0": {
              "name": "punctuation.section.group.begin.tasty"
            }
          },
          "end": "\\)",
          "endCaptures": {
            "0": {
              "name": "punctuation.section.group.end.tasty"
            }
          },
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#state-logic-groups"
            },
            {
              "include": "#state-selectors"
            },
            {
              "include": "#state-logic-operators"
            },
            {
              "include": "#custom-properties"
            },
            {
              "include": "#hash-colors"
            },
            {
              "include": "#color-functions"
            },
            {
              "include": "#functions"
            },
            {
              "include": "#css-with-units"
            },
            {
              "include": "#custom-units"
            },
            {
              "include": "#bare-numbers"
            },
            {
              "include": "#operators"
            }
          ],
          "comment": "Recursive grouping for logical expressions to support nested highlighting"
        }
      ]
    },
    "advanced-state-inner": {
      "comment": "Patterns for content inside @media(), @root(), @own(), @supports(), @() parentheses",
      "patterns": [
        {
          "comment": "Comparison operators: <=, >=, <, >, =",
          "name": "keyword.operator.comparison.tasty",
          "match": "<=|>=|<|>|="
        },
        {
          "comment": "Logical operators inside advanced states",
          "name": "keyword.operator.logical.tasty",
          "match": "&|\\||!"
        },
        {
          "comment": "Comma separator",
          "name": "punctuation.separator.comma.tasty",
          "match": ","
        },
        {
          "comment": "CSS units with numbers (768px, 50vh, etc.)",
          "name": "constant.numeric.css-with-unit.tasty",
          "match": "[+-]?(?:\\d*\\.\\d+|\\d+)(px|em|rem|vh|vw|vmin|vmax|%|ch|ex|cm|mm|in|pt|pc)"
        },
        {
          "comment": "Custom units (like 40x for gap-based queries)",
          "name": "constant.numeric.custom-unit.tasty",
          "match": "[+-]?(?:\\d*\\.\\d+|\\d+)([a-z][a-z0-9]*)"
        },
        {
          "comment": "Bare numbers",
          "name": "constant.numeric.tasty",
          "match": "[+-]?(?:\\d*\\.\\d+|\\d+)"
        },
        {
          "comment": "Style query value modifier: $variant=danger or $name",
          "name": "meta.style-query.tasty",
          "match": "(\\$[a-zA-Z_][a-zA-Z0-9_-]*)(=)([a-zA-Z0-9_-]+)",
          "captures": {
            "1": {
              "name": "variable.other.constant.tasty"
            },
            "2": {
              "name": "keyword.operator.assignment.tasty"
            },
            "3": {
              "name": "string.unquoted.attribute-value.tasty"
            }
          }
        },
        {
          "comment": "Style query property check: $variant",
          "name": "variable.other.constant.tasty",
          "match": "\\$[a-zA-Z_][a-zA-Z0-9_-]*"
        },
        {
          "comment": "Value modifier inside @root: theme=dark",
          "name": "meta.attribute-selector.tasty",
          "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(=)([a-zA-Z0-9_-]+)",
          "captures": {
            "1": {
              "name": "entity.other.attribute-name.tasty"
            },
            "2": {
              "name": "keyword.operator.attribute-selector.tasty"
            },
            "3": {
              "name": "string.unquoted.attribute-value.tasty"
            }
          }
        },
        {
          "comment": "Class selector: .active",
          "name": "entity.name.tag.class.css",
          "match": "\\.[a-z][a-z0-9-]+"
        },
        {
          "comment": "Attribute selector: [attr] or [attr=\"value\"]",
          "name": "meta.attribute-selector.tasty",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.attribute-selector.begin.tasty" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.attribute-selector.end.tasty" }
          },
          "patterns": [
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(=)(\"|')([^\"']*)(\\3)",
              "captures": {
                "1": { "name": "entity.other.attribute-name.tasty" },
                "2": { "name": "keyword.operator.attribute-selector.tasty" },
                "3": { "name": "punctuation.definition.string.begin.tasty" },
                "4": { "name": "string.quoted.attribute-value.tasty" },
                "5": { "name": "punctuation.definition.string.end.tasty" }
              }
            },
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)",
              "captures": {
                "1": { "name": "entity.other.attribute-name.tasty" }
              }
            }
          ]
        },
        {
          "comment": "Dimension shorthand identifiers: w, h, width, height",
          "name": "support.constant.property-value.tasty",
          "match": "\\b(w|h|width|height|inline-size|block-size)\\b"
        },
        {
          "comment": "Boolean modifier inside @own/@root",
          "name": "support.constant.property-value.tasty-state",
          "match": "\\b[a-z][a-z0-9-]*\\b"
        }
      ]
    },
    "pseudo-class-function-content": {
      "comment": "Content inside pseudo-class functions like :has(), :is(), :where(), :not(), :nth-child(), etc.",
      "patterns": [
        {
          "comment": "Nested pseudo-class functions",
          "name": "meta.pseudo-class-function.css",
          "begin": "(::?)([a-z][a-z0-9-]*)\\s*(\\()",
          "end": "\\)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.pseudo-class.css"
            },
            "2": {
              "name": "entity.other.attribute-name.pseudo-class.css"
            },
            "3": {
              "name": "punctuation.section.function.begin.css"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.section.function.end.css"
            }
          },
          "patterns": [
            { "include": "#pseudo-class-function-content" }
          ]
        },
        {
          "comment": "Simple pseudo-classes inside: :hover, :focus",
          "name": "meta.pseudo-class.css",
          "match": "(::?)([a-z][a-z0-9-]*)",
          "captures": {
            "1": {
              "name": "punctuation.definition.pseudo-class.css"
            },
            "2": {
              "name": "entity.other.attribute-name.pseudo-class.css"
            }
          }
        },
        {
          "comment": "CSS selector combinators: >, +, ~",
          "name": "keyword.operator.combinator.css",
          "match": "[>+~]"
        },
        {
          "comment": "Sub-element names (capitalized): Icon, Prefix",
          "name": "entity.name.type.sub-element.tasty",
          "match": "\\b[A-Z][A-Za-z0-9_]*\\b"
        },
        {
          "comment": "Class selectors: .active, .highlighted",
          "name": "meta.selector.class.css",
          "match": "(\\.)([a-zA-Z_][a-zA-Z0-9_-]*)",
          "captures": {
            "1": {
              "name": "punctuation.definition.entity.css"
            },
            "2": {
              "name": "entity.other.attribute-name.class.css"
            }
          }
        },
        {
          "comment": "Attribute selectors: [disabled], [data-theme=\"dark\"]",
          "name": "meta.attribute-selector.css",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.attribute-selector.begin.css"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.attribute-selector.end.css"
            }
          },
          "patterns": [
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)(\\*?[~|^$]?=)(\"|')([^\"']*)(\\3)",
              "captures": {
                "1": { "name": "entity.other.attribute-name.css" },
                "2": { "name": "keyword.operator.attribute-selector.css" },
                "3": { "name": "punctuation.definition.string.begin.css" },
                "4": { "name": "string.quoted.css" },
                "5": { "name": "punctuation.definition.string.end.css" }
              }
            },
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_-]*)",
              "captures": {
                "1": { "name": "entity.other.attribute-name.css" }
              }
            }
          ]
        },
        {
          "comment": "Numeric values with n: 2n+1, odd, even",
          "name": "constant.numeric.css",
          "match": "\\b(?:odd|even|[+-]?\\d*n(?:[+-]\\d+)?|\\d+)\\b"
        },
        {
          "comment": "Element/tag names: div, span",
          "name": "entity.name.tag.css",
          "match": "\\b[a-z][a-z0-9-]*\\b"
        },
        {
          "comment": "Comma separator",
          "name": "punctuation.separator.list.css",
          "match": ","
        }
      ]
    }
  }
}